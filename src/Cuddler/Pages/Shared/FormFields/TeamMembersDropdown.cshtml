@using global::Cuddler.Configuration.Identity.Extensions
@using global::Cuddler.Core.Membership
@using global::Cuddler.Data.Context
@using global::Cuddler.Forms
@using global::Cuddler.Pages.Shared.Cuddler.FormField
@using FormField = global::Cuddler.Forms.FormField
@model FormField
@inject IRepository Repository
@inject ITeamService TeamService
@{
    var userId = Model.BindId ?? Context.GetLoggedInAccountId();
    var data = TeamService.ListAllMyTeamMembers(userId)
                         .OrderBy(x => x.UserName)
                         .Select(x => new SelectListItem { Text = x.Profile.GetFullName(), Value = x.Id })
                         .ToList();

    data.Insert(0, new SelectListItem("Select one...", null));
}
<form-field bind-data="@data"
            description="@Model.Description"
            hide-label="@Model.HideLabel"
            html-attributes="@(new { style = "width:100%;" })"
            label="@Model.Label"
            name="@Model.Name"
            read-only="@Model.ReadOnly"
            required="@Model.Required"
            template="@(EFormField.Dropdown)"
            value="@Model.Value" />