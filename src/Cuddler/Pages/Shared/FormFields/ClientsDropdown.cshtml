@using global::Cuddler.Configuration.Identity.Extensions
@using global::Cuddler.Data.Context
@using global::Cuddler.Data.Entities
@using global::Cuddler.Forms
@using global::Cuddler.Pages.Shared.Cuddler.FormField
@using FormField = global::Cuddler.Forms.FormField
@model FormField
@inject IRepository Repository
@{
    var userId = Model.BindId ?? Context.GetLoggedInAccount()
                                        .Profile.OrganizationId ?? throw new InvalidOperationException("Use is not logged in. Error: 8b1c9a4d-a5b7-4d92-b50b-4961d0226607");

    var data = Repository.DbSet<OrganizationEntity>()
                         .Where(x => x.Id != userId)
                         .OrderBy(x => x.Name)
                         .Select(x => new SelectListItem { Text = x.Name, Value = x.Id })
                         .ToList();
}
<form-field bind-data="@data"
            description="@Model.Description"
            hide-label="@Model.HideLabel"
            html-attributes="@(new { style = "width:100%;" })"
            label="@Model.Label"
            name="@Model.Name"
            read-only="@Model.ReadOnly"
            required="@Model.Required"
            template="@(EFormField.Dropdown)"
            value="@Model.Value" />